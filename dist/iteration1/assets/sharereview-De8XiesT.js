import{_ as S,r as a,p as f,c as n,a as e,b as h,w as y,v as b,F as E,e as M,t as v,q as V,d as L,o as u}from"./index-CKrV_gny.js";import{a as N}from"./index-t--hEgTQ.js";const j={class:"read-section"},A={class:"container"},D={class:"search-area"},U={class:"preset-books"},W=["onClick"],F={key:0,class:"review-form"},K={class:"selected-title"},$={class:"card"},G={class:"info"},H={class:"card"},I={class:"card"},Q={class:"card"},Y=["disabled"],q={key:0,class:"error"},J={key:1,class:"toast"},O="https://reading-t9nr.onrender.com",z={__name:"sharereview",setup(X){const m=a([{key:"book1",title:"The Little Prince"},{key:"book2",title:"Harry Potter and the Sorcerer's Stone"},{key:"book3",title:"Pride and Prejudice"},{key:"book4",title:"To Kill a Mockingbird"},{key:"book5",title:"1984"},{key:"book6",title:"The Great Gatsby"},{key:"book7",title:"Moby-Dick"},{key:"book8",title:"The Hobbit"},{key:"book9",title:"War and Peace"},{key:"book10",title:"The Catcher in the Rye"},{key:"book11",title:"Crime and Punishment"},{key:"book12",title:"The Odyssey"},{key:"book13",title:"The Alchemist"},{key:"book14",title:"Les MisÃ©rables"},{key:"book15",title:"Brave New World"},{key:"book16",title:"The Chronicles of Narnia"},{key:"book17",title:"Anna Karenina"},{key:"book18",title:"Jane Eyre"},{key:"book19",title:"Don Quixote"},{key:"book20",title:"The Kite Runner"}]),k=a(""),r=a(null),l=a(""),c=a(""),d=a(null),i=a(""),p=a(""),g=L(),x=f(()=>k.value.trim()?m.value.filter(s=>s.title.toLowerCase().includes(k.value.toLowerCase())):m.value),C=s=>{r.value=s};let _=null;const P=s=>{p.value=s,clearTimeout(_),_=setTimeout(()=>{p.value=""},2e3)},w=s=>{const t=["bad","hate","stupid","ugly","kill"],o=s.toLowerCase();return!t.some(T=>o.includes(T))},R=f(()=>r.value&&l.value&&c.value&&d.value&&w(l.value)),B=async()=>{if(!w(l.value)){i.value="âŒ Your review must be neutral and constructive.";return}try{await N.post(`${O}/reviews`,{bookTitle:r.value.title,reviewText:l.value,emoji:c.value,rating:d.value}),r.value=null,l.value="",c.value="",d.value=null,i.value="",P("âœ… Review Posted!"),setTimeout(()=>{g.push("/reviewwall")},1e3)}catch(s){console.error("Error posting review:",s),s.response?i.value=`âŒ Server Error: ${s.response.data.error||"Failed to post review."}`:i.value="âŒ Network Error: Please check your connection."}};return(s,t)=>(u(),n("div",j,[e("div",A,[t[6]||(t[6]=e("h1",{class:"title"},"ðŸ“š Share a Review",-1)),e("div",D,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>k.value=o),placeholder:"Search books...",class:"search-input"},null,512),[[b,k.value]])]),e("div",U,[(u(!0),n(E,null,M(x.value,o=>(u(),n("div",{key:o.key,class:"book-card",onClick:T=>C(o)},[e("p",null,v(o.title),1)],8,W))),128))]),r.value?(u(),n("div",F,[e("h2",K,"âœï¸ Reviewing: "+v(r.value.title),1),e("div",$,[y(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value=o),placeholder:"Write your review (max 300 characters)",maxlength:"300",class:"textarea"},null,512),[[b,l.value]]),e("div",G,"Characters left: "+v(300-l.value.length),1)]),e("div",H,[y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>c.value=o),class:"search-input"},t[4]||(t[4]=[e("option",{disabled:"",value:""},"Select an emoji",-1),e("option",null,"ðŸ˜Š",-1),e("option",null,"ðŸ“–",-1),e("option",null,"ðŸ’­",-1),e("option",null,"ðŸŒŸ",-1),e("option",null,"ðŸ¤”",-1)]),512),[[V,c.value]])]),e("div",I,[y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>d.value=o),type:"number",min:"1",max:"10",placeholder:"Rating (1-10)",class:"search-input"},null,512),[[b,d.value,void 0,{number:!0}]])]),e("div",Q,[e("button",{disabled:!R.value,onClick:B,class:"btn"},"âœ… Post Review",8,Y),i.value?(u(),n("p",q,v(i.value),1)):h("",!0)]),t[5]||(t[5]=e("p",{class:"disclaimer"},"Your review is posted anonymously and safely stored.",-1))])):h("",!0),p.value?(u(),n("div",J,v(p.value),1)):h("",!0)])]))}},te=S(z,[["__scopeId","data-v-761896c8"]]);export{te as default};
