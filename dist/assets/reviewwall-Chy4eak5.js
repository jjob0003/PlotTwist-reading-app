import{_ as w,r as _,h as $,p as x,c as a,a as n,b as F,w as k,v as f,F as C,e as y,o as l,t as c}from"./index-CgCw1A7r.js";import{a as v}from"./index-t--hEgTQ.js";const T={class:"read-section"},V={class:"review-wall"},B={class:"search-area"},L={class:"grid"},N={class:"reactions"},R=["onClick"],S=["onClick"],D=["onClick"],U=["onClick"],A={class:"comment-section"},E={key:0},I={key:1,class:"no-comments"},M=["onUpdate:modelValue"],P=["onClick"],W={key:0,class:"no-results"},h="https://reading-t9nr.onrender.com",j={__name:"reviewwall",setup(Q){const i=_([]),r=_(""),d=_({});$(async()=>{try{const o=await v.get(`${h}/reviews`);i.value=o.data}catch(o){console.error("âŒ Failed to load reviews:",o)}});const p=x(()=>{if(!r.value.trim())return i.value;const o=r.value.toLowerCase();return i.value.filter(t=>t.bookTitle.toLowerCase().includes(o)||t.reviewText.toLowerCase().includes(o))}),u=async(o,t)=>{try{await v.post(`${h}/reviews/${o}/react`,{reaction:t});const e=i.value.find(s=>s.id===o);e&&e.reactions[t]++}catch(e){console.error("âŒ Failed to react:",e)}},b=async o=>{var e;const t=(e=d.value[o])==null?void 0:e.trim();if(t)try{await v.post(`${h}/reviews/${o}/comment`,{content:t});const s=i.value.find(m=>m.id===o);s&&(s.comments||(s.comments=[]),s.comments.push({content:t})),d.value[o]=""}catch(s){console.error("âŒ Failed to add comment:",s)}},g=o=>{i.value=i.value.filter(t=>t.id!==o)};return(o,t)=>(l(),a("div",T,[n("div",V,[t[2]||(t[2]=n("h1",null,"ðŸŒŸ Public Review Wall",-1)),n("div",B,[k(n("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),placeholder:"Search reviews...",class:"search-input"},null,512),[[f,r.value]])]),n("div",L,[(l(!0),a(C,null,y(p.value,e=>(l(),a("div",{key:e.id,class:"card"},[n("h2",null,c(e.bookTitle)+" "+c(e.emoji),1),n("p",null,c(e.reviewText),1),n("p",null,"â­ Rating: "+c(e.rating)+"/10",1),n("div",N,[n("button",{onClick:s=>u(e.id,"like")},"ðŸ‘ "+c(e.reactions.like),9,R),n("button",{onClick:s=>u(e.id,"love")},"â¤ï¸ "+c(e.reactions.love),9,S),n("button",{onClick:s=>u(e.id,"laugh")},"ðŸ˜‚ "+c(e.reactions.laugh),9,D),n("button",{class:"delete-btn",onClick:s=>g(e.id)},"ðŸ—‘ï¸ Delete",8,U)]),n("div",A,[t[1]||(t[1]=n("h3",null,"ðŸ’¬ Comments",-1)),e.comments&&e.comments.length?(l(),a("div",E,[(l(!0),a(C,null,y(e.comments,(s,m)=>(l(),a("p",{key:m,class:"comment"},c(s.content),1))),128))])):(l(),a("div",I,"No comments yet.")),k(n("input",{"onUpdate:modelValue":s=>d.value[e.id]=s,placeholder:"Write a comment...",class:"comment-input"},null,8,M),[[f,d.value[e.id]]]),n("button",{onClick:s=>b(e.id),class:"comment-btn"},"âž¤ Submit",8,P)])]))),128))]),p.value.length===0?(l(),a("div",W," No matching reviews found. ")):F("",!0)])]))}},G=w(j,[["__scopeId","data-v-253f5639"]]);export{G as default};
